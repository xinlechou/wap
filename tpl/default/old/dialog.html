<link rel="stylesheet" type="text/css" href="{$TMPL}/old/css/remodal.css"/>
<div class="light-tips"></div>
<script type="text/javascript" src="{$TMPL}/old/js/remodal.js"></script>
<!--两个按钮-->
<div class="remodal" data-remodal-id="confirmModal" role="dialog" aria-labelledby="modal1Title" aria-describedby="modal1Desc">
    <button data-remodal-action="close" class="remodal-close" aria-label="Close"></button>
    <div>
        <p id="confirmModal"></p>
    </div>
    <hr style="height:1px;border:none;border-top:1px solid #DEDEDE;margin: 2% auto"/>

        <button data-remodal-action="cancel" class="remodal-cancel">取消</button>
        <button data-remodal-action="confirm" class="remodal-confirm">确认</button>
</div>
<!--可自定义按钮名称，二个按钮-->
<div class="remodal" data-remodal-id="defaultModal" role="dialog" aria-labelledby="modal1Title" aria-describedby="modal1Desc">
    <button data-remodal-action="close" class="remodal-close" aria-label="Close"></button>
    <div>
        <p id="defaultModal"></p>
    </div>
    <hr style="height:1px;border:none;border-top:1px solid #DEDEDE;margin: 2% auto"/>
    <button data-remodal-action="cancel" class="remodal-cancel">取消</button>
    <button data-remodal-action="confirm" class="remodal-confirm">确认</button>
</div>
<!--1个按钮-->
<div data-remodal-id="alertModal" role="dialog">
    <div>
        <p id="alertModal"></p>
    </div>
    <hr style="height:1px;border:none;border-top:1px solid #DEDEDE;margin: 2% auto"/>
    <button data-remodal-action="confirm" class="remodal-confirm">确定</button>
</div>
<!--没有按钮-->
<div data-remodal-id="lightModal" role="dialog">
    <div>
        <p id="lightModal"></p>
        <br>
    </div>
</div>
<script>
    function dialog(msg,type,okFun,cancelFun,options){
        this.type = type;
        this.okFun = okFun;
        this.cancelFun = cancelFun?cancelFun:null;
        this.modal = type+"Modal";
        this.options = arguments[4]?arguments[4]:"";//可自定义按钮名称
        if(msg==""){return false};
        var modal1Desc = document.getElementById(this.modal);
        modal1Desc.innerHTML = msg;
        console.log(modal1Desc.innerHTML)
        this.open();
    }
    dialog.prototype.open = function(){
        switch (this.type){
            case 'confirm':
                this.confirm();//两个按钮
                break;
            case 'alert':
                this.alert();//一个按钮
                break;
            case 'light':
                this.light()//延时消失
                break;
            default :
                //自定义按钮
                this.default(this.options)
                break;
        }
    }
    dialog.prototype.confirm = function(){
        var inst = $('[data-remodal-id='+this.modal+']').remodal();
        console.log($('[data-remodal-action=cancel]').html())
        inst.open();
        okFun = this.okFun;
        $(document).on('confirmation', '[data-remodal-id='+this.modal+']', function () {
            okFun && okFun();
        });
    }
    dialog.prototype.alert = function(){
        var inst = $('[data-remodal-id='+this.modal+']').remodal();
        inst.open();
        console.log(inst)
        okFun = this.okFun;
        $(document).on('confirmation', '[data-remodal-id='+this.modal+']', function () {
            okFun && okFun();
        });
    }
    dialog.prototype.light = function(){
        var inst = $('[data-remodal-id='+this.modal+']').remodal();
        inst.open();
        setTimeout(function(){
            inst.close()
        },5000);
    }
    dialog.prototype.default = function(options){
        var inst = $('[data-remodal-id='+this.modal+']').remodal();
        inst.open();
        okFun = this.okFun;
        cancelFun = this.cancelFun;
        $(document).on('confirmation', '[data-remodal-id='+this.modal+']', function () {
            okFun && okFun();
        });
        $(document).on('cancellation', '[data-remodal-id='+this.modal+']', function () {
            cancelFun && cancelFun();
        });
        $.each(options,function(index,item){
            $('[data-remodal-action="'+item.action+'"]').html(item.name);
        });

    }
      /*$(function() {
          var a = new dialog('sddddddddds','light',function(){console.log('玩意')},[{name:"ok",action:'confirm'},{name:"no",action:'cancel'}],function(){
              console.log('玩意111')
          });
      });*/
    //出错时检查一下是不是不小心引用了两个dialog文件
</script>

